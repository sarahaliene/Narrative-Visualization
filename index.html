<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,
                                   initial-scale=1.0">
    <title>Narrative Visualization</title>
</head>

<script src='https://d3js.org/d3.v5.min.js'></script>
<style> rect {stroke: black;} </style>

<body style="background-color:#ECC5C0;">
    <header>
        <h1>
            Narrative Visualization Project
        </h1>
    </header>
    <main>
        <p>
            This is where your content goes.
        </p>

        <p>
            
			<a href="https://sarahaliene.github.io/Narrative-Visualization/scene3">Next</a>

        </p>
    </main>

<div id = "svgcontainer">
</div>

<div id = "legendcontainer">
</div>

<script>

//Set up data

//Year, EstimatedTotal
var data = ([
[2001,2163373],
[2002,2058547],
[2003,2110270],
[2004,2217826],
[2005,2102099],
[2006,2149660],
[2007,2024768],
[2008,2075647],
[2009,2003585],
[2010,2343157],
[2011,2356394],
[2012,2305535],
[2013,2238615],
[2014,2109815],
[2015,2165482],
[2016,2228954],
[2017,2292945],
[2018,2120430],
[2019,2087176],
[2020,1985004],
[2021,1958273],
[2022,2105245]]);

//Year,	Assault,	LegalIntervention,	SexualAssault,	SelfHarm,	Other
var categories = ([
[2001,1696441,45122,67331,306759,47721],
[2002,1586315,47242,76317,309952,38719],
[2003,1555018,43851,73834,395322,42245],
[2004,1628065,58930,79855,410133,40841],
[2005,1567432,56232,74198,359874,44363],
[2006,1589223,59343,71296,383294,46500],
[2007,1412180,60757,74676,379139,98016],
[2008,1535760,53691,73809,358943,53442],
[2009,1472129,55384,63096,358769,54206],
[2010,1705942,73505,70963,444737,48009],
[2011,1677097,77083,78521,473134,50561],
[2012,1630398,70622,80687,461367,62461],
[2013,1497717,80259,72910,477361,110368],
[2014,1412163,65013,72762,447271,112606],
[2015,1430147,52702,80590,487013,115031],
[2016,1458141,59220,88431,483372,139789],
[2017,1489827,59255,103437,475845,164580],
[2018,1331462,61289,97284,473364,157030],
[2019,1151369,61566,98786,470248,305209],
[2020,1168223,55676,93140,461286,206679],
[2021,1128261,45524,101215,466865,216408],
[2022,1346640,55111,115695,529456,58343]
	]);

var w = 1200;
var h = 600;
var m = 50;


var scene = d3.select("#svgcontainer")
	.append("svg")
	.attr("width", w)
	.attr("height", h)
	.append("g")
	.attr("transform","translate("+m+","+m+")");

var labels = ["Assault","Legal Intervention","Sexual Assault","Other","Self-Harm"];
var lcolors = ["#e8adaa","#7d1b7e","#b93b8f","#78c7c7","#fc6c85"];


var xScale = d3.scaleBand().domain([2001,
2002,
2003,
2004,
2005,
2006,
2007,
2008,
2009,
2010,
2011,
2012,
2013,
2014,
2015,
2016,
2017,
2018,
2019,
2020,
2021,
2022
]).range([50,1000]).padding(0.3);
var xAxis = d3.axisBottom().scale(xScale);

var yScale = d3.scaleLinear().domain([0,2500000]).range([h - 75, 50]);
var yAxis = d3.axisLeft().scale(yScale);

var group0 = scene.append("g");

group0.selectAll("rect").data(data).enter().append("rect")
	.attr("x", function(d) {return xScale(d[0]);})
	.attr("y", function(d) {return yScale(d[1]);})
	.attr("width", xScale.bandwidth())
	.attr("height", function(d) {return yScale(h) - (yScale(d[1]));})
	.attr("fill", "#C5908E");
		
var group1 = scene.append("g");

group1.selectAll("rect").data(categories).enter().append("rect")
	.attr("x", function(d) {return xScale(d[0]);})
	.attr("y", function(d) {return yScale(d[4]);})
	.attr("width", xScale.bandwidth())
	.attr("height", function(d) {return yScale(h) - (yScale(d[4]));})
	.style("opacity", 0.0)
	.attr("fill", "#fc6c85");

var group2 = scene.append("g");

group2.selectAll("rect").data(categories).enter().append("rect")
	.attr("x", function(d) {return xScale(d[0]);})
	.attr("y", function(d) {return yScale(d[4] + d[5]);})
	.attr("width", xScale.bandwidth())
	.attr("height", function(d) {return yScale(h) - yScale(d[5]);})
	.style("opacity", 0.0)
	.attr("fill", "#78c7c7");

var group2v2 = scene.append("g");

group2v2.selectAll("rect").data(categories).enter().append("rect")
	.attr("x", function(d) {return xScale(d[0]);})
	.attr("y", function(d) {return yScale(d[5]);})
	.attr("width", xScale.bandwidth())
	.attr("height", function(d) {return yScale(h) - yScale(d[5]);})
	.style("opacity", 0.0)
	.attr("fill", "#78c7c7");


var group3 = scene.append("g");

group3.selectAll("rect").data(categories).enter().append("rect")
	.attr("x", function(d) {return xScale(d[0]);})
	.attr("y", function(d) {return yScale(d[4] + d[3] + d[5]);})
	.attr("width", xScale.bandwidth())
	.attr("height", function(d) {return yScale(h) - yScale(d[3]);})
	.style("opacity", 0.0)
	.attr("fill", "#b93b8f");

var group3v2 = scene.append("g");

group3v2.selectAll("rect").data(categories).enter().append("rect")
	.attr("x", function(d) {return xScale(d[0]);})
	.attr("y", function(d) {return yScale(d[3]);})
	.attr("width", xScale.bandwidth())
	.attr("height", function(d) {return yScale(h) - yScale(d[3]);})
	.style("opacity", 0.0)
	.attr("fill", "#b93b8f");

var group4 = scene.append("g");

group4.selectAll("rect").data(categories).enter().append("rect")
	.attr("x", function(d) {return xScale(d[0]);})
	.attr("y", function(d) {return yScale(d[5] + d[2] + d[3] + d[4]);})
	.attr("width", xScale.bandwidth())
	.attr("height", function(d) {return yScale(h) - yScale(d[2]);})
	.style("opacity", 0.0)
	.attr("fill", "#7d1b7e");

var group4v2 = scene.append("g");

group4v2.selectAll("rect").data(categories).enter().append("rect")
	.attr("x", function(d) {return xScale(d[0]);})
	.attr("y", function(d) {return yScale(d[2]);})
	.attr("width", xScale.bandwidth())
	.attr("height", function(d) {return yScale(h) - yScale(d[2]);})
	.style("opacity", 0.0)
	.attr("fill", "#7d1b7e");

var group5 = scene.append("g");

group5.selectAll("rect").data(categories).enter().append("rect")
	.attr("x", function(d) {return xScale(d[0]);})
	.attr("y", function(d) {return yScale(d[1] + d[2] + d[3] + d[4] + d[5]);})
	.attr("width", xScale.bandwidth())
	.attr("height", function(d) {return yScale(h) - yScale(d[1]);})
	.style("opacity", 0.0)
	.attr("fill", "#e8adaa");

var group5v2 = scene.append("g");

group5v2.selectAll("rect").data(categories).enter().append("rect")
	.attr("x", function(d) {return xScale(d[0]);})
	.attr("y", function(d) {return yScale(d[1]);})
	.attr("width", xScale.bandwidth())
	.attr("height", function(d) {return yScale(h) - (yScale(d[1]));})
	.style("opacity", 0.0)
	.attr("fill", "#E8ADAA");


scene.append("g").attr("transform","translate("+50+","+0+")").call(d3.axisLeft(yScale));

scene.append("g").attr("transform","translate("+0+","+525+")").call(d3.axisBottom(xScale));

//Set up Main Button
scene.append("g").append("rect")
    .attr("x", 110)
    .attr("y", 0)
    .attr("width", 100)
    .attr("height", 35)
    .attr("id","MainButton")
    .attr("fill", "linen")
    .attr("stroke", "black")
    .on("click", function(d) {
        group1.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group2.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group3.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group4.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group5.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        })

var button = scene.append("g").append("rect")
    .attr("x", 110)
    .attr("y", 0)
    .attr("width", 100)
    .attr("height", 35)
    .attr("id","MainButton")
    .attr("fill", "linen")
    .attr("stroke", "black")
    .on("click", function(d) {
        group1.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group2.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group3.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group4.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group5.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        })

scene.append("g").append("text")
    .attr("x", 160)
    .attr("y",22)
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", "12px")
    .attr("font-weight", "bold")
    .attr("fill", "black")
    .text("All")
    .on("click", function(d) {
        group1.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group2.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group3.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group4.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group5.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        })
//Add buttons

var button1 = scene.append("g").append("rect")
    .attr("x", 225)
    .attr("y", 0)
    .attr("width", 110)
    .attr("height", 35)
    .attr("id","AssaultButton")
    .attr("fill","#C5908E")
    .style("opacity", 0.8)
    .attr("stroke","black")
    .on("click", function(d) {

        d3.selectAll("rect").style("opacity", 0.0)
        button.style("opacity", 1.0)
        button1.style("opacity", 1.0)
        button2.style("opacity", 1.0)
        button3.style("opacity", 1.0)
        button4.style("opacity", 1.0)
        button5.style("opacity", 1.0)
        group5v2.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        
    });

scene.append("g").append("text")
    .attr("x", 280)
    .attr("y",22)
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", "12px")
    .attr("font-weight", "bold")
    .attr("fill", "black")
    .text("Assault")
    .on("click", function(d) {

        d3.selectAll("rect").style("opacity", 0.0)
        button.style("opacity", 1.0)
        button1.style("opacity", 1.0)
        button2.style("opacity", 1.0)
        button3.style("opacity", 1.0)
        button4.style("opacity", 1.0)
        button5.style("opacity", 1.0)
        group5v2.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        
    });

var button2 = scene.append("g").append("rect")
    .attr("x", 350)
    .attr("y", 0)
    .attr("width", 110)
    .attr("height", 35)
    .attr("id","LegalInterventionButton")
    .attr("fill","#7d1b7e")
    .style("opacity", 0.8)
    .attr("stroke","black")
    .on("click", function(d) {

        d3.selectAll("rect").style("opacity", 0.0)
        button.style("opacity", 1.0)
        button1.style("opacity", 1.0)
        button2.style("opacity", 1.0)
        button3.style("opacity", 1.0)
        button4.style("opacity", 1.0)
        button5.style("opacity", 1.0)
        group4v2.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

scene.append("g").append("text")
    .attr("x", 405)
    .attr("y",22)
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", "12px")
    .attr("font-weight", "bold")
    .attr("fill", "black")
    .text("Legal Intervention")
    .on("click", function(d) {

        d3.selectAll("rect").style("opacity", 0.0)
        button.style("opacity", 1.0)
        button1.style("opacity", 1.0)
        button2.style("opacity", 1.0)
        button3.style("opacity", 1.0)
        button4.style("opacity", 1.0)
        button5.style("opacity", 1.0)
        group4v2.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

var button3 = scene.append("g").append("rect")
    .attr("x", 475)
    .attr("y", 0)
    .attr("width", 110)
    .attr("height", 35)
    .attr("id","SexualAssaultButton")
    .attr("fill","#b93b8f")
    .style("opacity", 0.8)
    .attr("stroke","black")
    .on("click", function(d) {

        d3.selectAll("rect").style("opacity", 0.0)
        button.style("opacity", 1.0)
        button1.style("opacity", 1.0)
        button2.style("opacity", 1.0)
        button3.style("opacity", 1.0)
        button4.style("opacity", 1.0)
        button5.style("opacity", 1.0)
        group3v2.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

scene.append("g").append("text")
    .attr("x", 530)
    .attr("y",22)
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", "12px")
    .attr("font-weight", "bold")
    .attr("fill", "black")
    .text("Sexual Assault")
    .on("click", function(d) {

        d3.selectAll("rect").style("opacity", 0.0)
        button.style("opacity", 1.0)
        button1.style("opacity", 1.0)
        button2.style("opacity", 1.0)
        button3.style("opacity", 1.0)
        button4.style("opacity", 1.0)
        button5.style("opacity", 1.0)
        group3v2.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

var button4 = scene.append("g").append("rect")
    .attr("x", 600)
    .attr("y", 0)
    .attr("width", 110)
    .attr("height", 35)
    .attr("id","OtherButton")
    .attr("fill","#78c7c7")
    .style("opacity", 0.8)
    .attr("stroke","black")
    .on("click", function(d) {

        d3.selectAll("rect").style("opacity", 0.0)
        button.style("opacity", 1.0)
        button1.style("opacity", 1.0)
        button2.style("opacity", 1.0)
        button3.style("opacity", 1.0)
        button4.style("opacity", 1.0)
        button5.style("opacity", 1.0)
        group2v2.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

scene.append("g").append("text")
    .attr("x", 653)
    .attr("y",22)
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", "12px")
    .attr("font-weight", "bold")
    .attr("fill", "black")
    .text("Other")
    .on("click", function(d) {

        d3.selectAll("rect").style("opacity", 0.0)
        button.style("opacity", 1.0)
        button1.style("opacity", 1.0)
        button2.style("opacity", 1.0)
        button3.style("opacity", 1.0)
        button4.style("opacity", 1.0)
        button5.style("opacity", 1.0)
        group2v2.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

var button5 = scene.append("g").append("rect")
    .attr("x", 725)
    .attr("y", 0)
    .attr("width", 110)
    .attr("height", 35)
    .attr("id","SelfHarmButton")
    .attr("fill","#fc6c85")
    .style("opacity", 0.8)
    .attr("stroke","black")
    .on("click", function(d) {

        d3.selectAll("circle").style("opacity", 0.0)
        button.style("opacity", 1.0)
        button1.style("opacity", 1.0)
        button2.style("opacity", 1.0)
        button3.style("opacity", 1.0)
        button4.style("opacity", 1.0)
        button5.style("opacity", 1.0)
        group1.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

scene.append("g").append("text")
    .attr("x", 778)
    .attr("y",22)
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", "12px")
    .attr("font-weight", "bold")
    .attr("fill", "black")
    .text("Self-Harm")
    .on("click", function(d) {

        d3.selectAll("rect").style("opacity", 0.0)
        button.style("opacity", 1.0)
        button1.style("opacity", 1.0)
        button2.style("opacity", 1.0)
        button3.style("opacity", 1.0)
        button4.style("opacity", 1.0)
        button5.style("opacity", 1.0)
        group1.selectAll("rect")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

</script>


<footer>
        <p>Sarah Butt</p>
</footer>
</body>
</html>
