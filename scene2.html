<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,
                                   initial-scale=1.0">
    <title>Narrative Visualization</title>
</head>

<script src='https://d3js.org/d3.v5.min.js'></script>
<style> 
        body {background-color:#ECC5C0;}
</style>

<body>
    <header>
        <h1>
            Narrative Visualization Project
        </h1>
    </header>
    <main>
        <p>
            This is where your content goes.
        </p>
        <p>
           <a href = "https://sarahaliene.github.io/Narrative-Visualization/scene3">Next</a>
        </p>
        <p>
           <a href = "https://sarahaliene.github.io/Narrative-Visualization/">Back</a>
        </p>
       
    </main>

    <div id = "svgcontainer">   
    </div>
    

<script>

//Set up data
//Assault   LegalIntervention   SexualAssault   SelfHarm    Other
//Increase from 2001 to 2022
var increase = [-0.206196974,0.221377599,0.718302119,0.72596729, 0.222585445];

var data = [
            ["2001-2002",[-0.064915903,0.046983733,0.13346007,0.010408823,-0.188638126]],
            ["2002-2003",[-0.019729373,-0.071779349,-0.032535346,0.275429744,0.091066402]],
            ["2003-2004",[0.046975019,0.343869011,0.081547796,0.037465661,-0.033234702]],
            ["2004-2005",[-0.037242371,-0.045783133,-0.070840899,-0.122543175,0.08623687]],
            ["2005-2006",[0.013902357,0.05532437,-0.039111566,0.065078333,0.048170773]],
            ["2006-2007",[-0.111402239,0.023827579,0.047407989,-0.010840243,1.107870968]],
            ["2007-2008",[0.087510091,-0.116299356,-0.011610156,-0.053268063,-0.454762488]],
            ["2008-2009",[-0.041432906,0.031532287,-0.145144901,-0.000484757,0.014295872]],
            ["2009-2010",[0.158826434,0.327188358,0.124683023,0.239619365,-0.114323138]],
            ["2010-2011",[-0.016908547,0.048676961,0.106506207,0.06385122,0.0531567]],
            ["2011-2012",[-0.02784514,-0.083818741,0.027584977,-0.024870333,0.235359269]],
            ["2012-2013",[-0.081379516,0.136458894,-0.096384796,0.034666545,0.766990602]],
            ["2013-2014",[-0.057122941,-0.189960004,-0.0020299,-0.063034056,0.020277617]],
            ["2014-2015",[0.012735074,-0.189362128,0.107583629,0.088854408,0.021535265]],
            ["2015-2016",[0.019574212,0.123676521,0.09729495,-0.007476186,0.215228938]],
            ["2016-2017",[0.021730409,0.000591017,0.169691624,-0.015571858,0.177345857]],
            ["2017-2018",[-0.106297577,0.034326217,-0.059485484,-0.005213883,-0.045874347]],
            ["2018-2019",[-0.135259587,0.004519571,0.015439332,-0.006582672,0.943634974]],
            ["2019-2020",[0.014638226,-0.095669688,-0.057153848,-0.019058029,-0.322827964]],
            ["2020-2021",[-0.03420751,-0.182340685,0.086697445,0.012094449,0.047072997]],
            ["2021-2022",[0.193553619,0.210592215,0.143061799,0.134066593,-0.730402758]]
            ];

var w = 1200;
var h = 600;
var m = 50;

var labels = ["Assault","Legal Intervention","Sexual Assault","Other","Self-Harm"];
var lcolors = ["#C5908E","#7d1b7e","#b93b8f","#78c7c7","#fc6c85"];


var scene = d3.select("#svgcontainer")
    .append("svg")
    .attr("width", w)
    .attr("height", h)
    .append("g")
    .attr("transform","translate("+m+","+m+")");

var xScale = d3.scaleBand().domain(["2001-2002","2002-2003","2003-2004","2004-2005",
"2005-2006","2006-2007","2007-2008","2008-2009","2009-2010","2010-2011",
"2011-2012","2012-2013","2013-2014","2014-2015","2015-2016","2016-2017",
"2017-2018","2018-2019","2019-2020","2020-2021","2021-2022"]).range([50,w - 50]).padding(0.3);
var xAxis = d3.axisBottom().scale(xScale);

var yScale = d3.scaleLinear().domain([-80,150]).range([h - 75, 0]);
var yAxis = d3.axisLeft().scale(yScale);

scene.append("g").attr("transform","translate("+50+","+0+")").call(d3.axisLeft(yScale));

scene.append("g").attr("transform","translate("+0+","+525+")").call(d3.axisBottom(xScale));

//Assault Group
var group1 = scene.append("g");
group1.selectAll("circle").data(data).enter().append("circle")
    .attr("cx", function(d) {return xScale(d[0]) + 13;})
    .attr("cy", function(d) {return yScale(d[1][0] * 100 - 3);})
    .attr("r",5)
    .attr("fill","#C5908E")
    .style("opacity", 0.0)
    .attr("stroke","black");

//Legal Intervention
var group2 = scene.append("g");
group2.selectAll("circle").data(data).enter().append("circle")
    .attr("cx", function(d) {return xScale(d[0]) + 13;})
    .attr("cy", function(d) {return yScale(d[1][1] * 100 - 3);})
    .attr("r",5)
    .attr("fill","#7d1b7e")
    .style("opacity", 0.0)
    .attr("stroke","black");

//Sexual Assault Group
var group3 = scene.append("g");
group3.selectAll("circle").data(data).enter().append("circle")
    .attr("cx", function(d) {return xScale(d[0]) + 13;})
    .attr("cy", function(d) {return yScale(d[1][2] * 100 - 3);})
    .attr("r",5)
    .attr("fill","#b93b8f")
    .style("opacity", 0.0)
    .attr("stroke","black");

//Self-Harm Group
var group4 = scene.append("g");
group4.selectAll("circle").data(data).enter().append("circle")
    .attr("cx", function(d) {return xScale(d[0]) + 13;})
    .attr("cy", function(d) {return yScale(d[1][3] * 100 - 3);})
    .attr("r",5)
    .attr("fill","#fc6c85")
    .style("opacity", 0.0)
    .attr("stroke","black");

//Other Group
var group5 = scene.append("g");
group5.selectAll("circle").data(data).enter().append("circle")
    .attr("cx", function(d) {return xScale(d[0]) + 13;})
    .attr("cy", function(d) {return yScale(d[1][4] * 100 - 3);})
    .attr("r",5)
    .attr("fill","#78c7c7")
    .style("opacity", 0.0)
    .attr("stroke","black");

//Set up Main Button
scene.append("g").append("rect")
    .attr("x", 110)
    .attr("y", 0)
    .attr("width", 100)
    .attr("height", 35)
    .attr("id","MainButton")
    .attr("fill", "linen")
    .attr("stroke", "black")
    .on("click", function(d) {
        group1.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group2.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group3.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group4.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group5.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        })

scene.append("g").append("text")
    .attr("x", 160)
    .attr("y",22)
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", "12px")
    .attr("font-weight", "bold")
    .attr("fill", "black")
    .text("All")
    .on("click", function(d) {
        group1.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group2.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group3.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group4.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        group5.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        })
//Add buttons

var button1 = scene.append("g").append("rect")
    .attr("x", 225)
    .attr("y", 0)
    .attr("width", 110)
    .attr("height", 35)
    .attr("id","AssaultButton")
    .attr("fill","#C5908E")
    .style("opacity", 0.8)
    .attr("stroke","black")
    .on("click", function(d) {

        d3.selectAll("circle").style("opacity", 0.0)
        group1.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        
    });

scene.append("g").append("text")
    .attr("x", 280)
    .attr("y",22)
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", "12px")
    .attr("font-weight", "bold")
    .attr("fill", "black")
    .text("Assault")
    .on("click", function(d) {

        d3.selectAll("circle").style("opacity", 0.0)
        group1.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
        
    });

var button2 = scene.append("g").append("rect")
    .attr("x", 350)
    .attr("y", 0)
    .attr("width", 110)
    .attr("height", 35)
    .attr("id","LegalInterventionButton")
    .attr("fill","#7d1b7e")
    .style("opacity", 0.8)
    .attr("stroke","black")
    .on("click", function(d) {

        d3.selectAll("circle").style("opacity", 0.0)
        group2.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

scene.append("g").append("text")
    .attr("x", 405)
    .attr("y",22)
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", "12px")
    .attr("font-weight", "bold")
    .attr("fill", "black")
    .text("Legal Intervention")
    .on("click", function(d) {

        d3.selectAll("circle").style("opacity", 0.0)
        group2.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

var button3 = scene.append("g").append("rect")
    .attr("x", 475)
    .attr("y", 0)
    .attr("width", 110)
    .attr("height", 35)
    .attr("id","SexualAssaultButton")
    .attr("fill","#b93b8f")
    .style("opacity", 0.8)
    .attr("stroke","black")
    .on("click", function(d) {

        d3.selectAll("circle").style("opacity", 0.0)
        group3.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

scene.append("g").append("text")
    .attr("x", 530)
    .attr("y",22)
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", "12px")
    .attr("font-weight", "bold")
    .attr("fill", "black")
    .text("Sexual Assault")
    .on("click", function(d) {

        d3.selectAll("circle").style("opacity", 0.0)
        group3.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

var button4 = scene.append("g").append("rect")
    .attr("x", 600)
    .attr("y", 0)
    .attr("width", 110)
    .attr("height", 35)
    .attr("id","OtherButton")
    .attr("fill","#78c7c7")
    .style("opacity", 0.8)
    .attr("stroke","black")
    .on("click", function(d) {

        d3.selectAll("circle").style("opacity", 0.0)
        group5.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

scene.append("g").append("text")
    .attr("x", 653)
    .attr("y",22)
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", "12px")
    .attr("font-weight", "bold")
    .attr("fill", "black")
    .text("Other")
    .on("click", function(d) {

        d3.selectAll("circle").style("opacity", 0.0)
        group5.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

var button5 = scene.append("g").append("rect")
    .attr("x", 725)
    .attr("y", 0)
    .attr("width", 110)
    .attr("height", 35)
    .attr("id","SelfHarmButton")
    .attr("fill","#fc6c85")
    .style("opacity", 0.8)
    .attr("stroke","black")
    .on("click", function(d) {

        d3.selectAll("circle").style("opacity", 0.0)
        group4.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

scene.append("g").append("text")
    .attr("x", 778)
    .attr("y",22)
    .attr("text-anchor", "middle")
    .attr("font-family", "sans-serif")
    .attr("font-size", "12px")
    .attr("font-weight", "bold")
    .attr("fill", "black")
    .text("Self-Harm")
    .on("click", function(d) {

        d3.selectAll("circle").style("opacity", 0.0)
        group4.selectAll("circle")
            .transition()
            .duration(2000)
            .style("opacity", 1.0)
    });

   
</script>


<footer>
        <p>Sarah Butt</p>
</footer>
</body>
</html>
